(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,a){e.exports=a(48)},42:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),i=a(21),s=a(9),o=(a(42),a(2)),u=a(16),d=a(7),m=a(8),p=a(13),h=a(11),b=a(10),E=a(24),v=a.n(E),f=a(30),g=(a(44),function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={email:"",password:"",btnDisable:!0,redirect:!1},e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e.checkValid=e.checkValid.bind(Object(p.a)(e)),e}return Object(m.a)(a,[{key:"checkValid",value:function(){var e=this.state,t=e.email,a=e.password;/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/i.test(t)&&a.length>=6?this.setState({btnDisable:!1}):this.setState({btnDisable:!0})}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(u.a)({},n,a),this.checkValid)}},{key:"handleClick",value:function(e){e.preventDefault(),(0,this.props.add)(this.state.email),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this.state,t=e.redirect,a=e.btnDisable;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(o.a,{to:"/carteira"}),r.a.createElement("form",{className:"login-form"},r.a.createElement("h1",null,"TrybeWallet"),r.a.createElement("label",{htmlFor:"email-input",className:"form-label"},"Email:",r.a.createElement("input",{id:"email-input",name:"email","data-testid":"email-input",type:"email",className:"form-control",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"pass-input"},"Password:",r.a.createElement("input",{id:"pass-input",name:"password","data-testid":"password-input",type:"password",className:"form-control",onChange:this.handleChange})),r.a.createElement("button",{type:"button",disabled:a,className:"btn btn-primary",onClick:this.handleClick},"Entrar")))}}]),a}(r.a.Component)),y=Object(s.b)(null,(function(e){return{add:function(t){return e({type:"ADD_USER",email:t})}}}))(g),j=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.expenses,n=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),c=a.reduce((function(e,t){var a=t.value,n=t.currency,r=t.exchangeRates;return e+parseFloat(r[n].ask)*parseFloat(a)}),0);return r.a.createElement("header",{className:"d-flex flex-column flex-md-row align-items-center p-2 mb-3 border-bottom shadow-sm"},r.a.createElement("h1",{className:"my-0 mr-md-auto font-weight-normal"},"TrybeWallet"),r.a.createElement("div",null,r.a.createElement("span",{className:"p-1","data-testid":"email-field"},"".concat(t," |")),r.a.createElement("span",{className:"p-1","data-testid":"total-field"},n.format(c)),r.a.createElement("span",{className:"p-1","data-testid":"header-currency-field"},"BRL")))}}]),a}(r.a.Component);j.defaultProps={email:""};var x=Object(s.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(j),O=a(4),C=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",nowEditing:!1},n.handleChange=n.handleChange.bind(Object(p.a)(n)),n.saveClick=n.saveClick.bind(Object(p.a)(n)),n.replaceClick=n.replaceClick.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetchCurrencies)()}},{key:"componentDidUpdate",value:function(){var e=this.props.editing,t=this.state.nowEditing;e.edit&&!t&&this.loadEdit(e)}},{key:"loadEdit",value:function(e){var t=e.expense,a=t.value,n=t.description,r=t.currency,c=t.method,l=t.tag;this.setState({value:a,description:n,currency:r,method:c,tag:l,nowEditing:!0})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"cleanState",value:function(){this.setState({value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",nowEditing:!1})}},{key:"saveClick",value:function(e){e.preventDefault();var t=this.props,a=t.fetchCurrencies,n=t.currenciesResp,r=t.addExpense,c=t.expenses;a();var l=c.length,i=this.state;r({value:i.value,description:i.description,currency:i.currency,method:i.method,tag:i.tag,id:l,exchangeRates:n}),this.cleanState()}},{key:"replaceClick",value:function(e){e.preventDefault();var t=this.props,a=t.replace,n=t.editing,r=this.state,c=r.value,l=r.description,i=r.currency,s=r.method,o=r.tag;a(Object(O.a)(Object(O.a)({},n.expense),{},{value:c,description:l,currency:i,method:s,tag:o})),this.cleanState()}},{key:"currenciesSelect",value:function(e,t){return r.a.createElement("label",{htmlFor:"currency-input"},"Moeda",r.a.createElement("select",{className:"form-select",name:"currency","data-testid":"currency-input",id:"currency-input",value:t,onChange:this.handleChange},e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))}},{key:"methodSelect",value:function(e){return r.a.createElement("label",{htmlFor:"method-input"},"M\xe9todo de pagamento",r.a.createElement("select",{className:"form-select",name:"method","data-testid":"method-input",id:"method-input",value:e,onChange:this.handleChange},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito")))}},{key:"tagSelect",value:function(e){return r.a.createElement("label",{htmlFor:"tag-input"},"Tag",r.a.createElement("select",{className:"form-select",name:"tag",id:"tag-input",value:e,"data-testid":"tag-input",onChange:this.handleChange},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade")))}},{key:"sendBtn",value:function(){return this.state.nowEditing?r.a.createElement("button",{className:"btn btn-success",type:"submit",onClick:this.replaceClick},"Editar despesa"):r.a.createElement("button",{className:"btn btn-success",type:"submit",onClick:this.saveClick},"Adicionar despesa")}},{key:"render",value:function(){var e=this.props.currencies,t=this.state,a=t.value,n=t.description,c=t.currency,l=t.method,i=t.tag;return r.a.createElement("form",{className:"row gy-2 gx-3 align-items-end justify-content-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("label",{htmlFor:"valor-input"},"Valor",r.a.createElement("input",{className:"form-control","data-testid":"value-input",type:"number",name:"value",id:"valor-input",value:a,onChange:this.handleChange}))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("label",{htmlFor:"description-input"},"Descri\xe7\xe3o",r.a.createElement("input",{className:"form-control",type:"text","data-testid":"description-input",name:"description",id:"description-input",value:n,onChange:this.handleChange}))),r.a.createElement("div",{className:"col-auto"},this.currenciesSelect(e,c)),r.a.createElement("div",{className:"col-auto"},this.methodSelect(l)),r.a.createElement("div",{className:"col-auto"},this.tagSelect(i)),r.a.createElement("div",{className:"col-auto"},this.sendBtn()))}}]),a}(r.a.Component);C.defaultProps={expenses:[],editing:{edit:!1,expense:{}},currenciesResp:{}};var k=Object(s.b)((function(e){return{currencies:e.wallet.currencies,currenciesResp:e.wallet.currenciesResp,expenses:e.wallet.expenses,editing:e.wallet.editing}}),(function(e){return{fetchCurrencies:function(){return e(function(){var e=Object(f.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return a=e.sent,e.next=6,a.json();case 6:delete(n=e.sent).USDT,t({type:"ADD_CURRENCIES",currencies:n}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())},addExpense:function(t){return e(function(e){return{type:"ADD_EXPENSE",expense:e}}(t))},replace:function(t){return e(function(e){return{type:"REPLACE_EXPENSE",expense:e}}(t))}}}))(C),w=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.expense,a=e.rmv,n=e.edt,c=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,t.value),r.a.createElement("td",null,t.exchangeRates[t.currency].name.split("/")[0]),r.a.createElement("td",null,c.format(t.exchangeRates[t.currency].ask)),r.a.createElement("td",null,c.format(parseFloat(t.value)*parseFloat(t.exchangeRates[t.currency].ask))),r.a.createElement("td",null,"Real"),r.a.createElement("td",{className:"btns-td"},r.a.createElement("input",{"data-testid":"delete-btn",className:"btn btn-danger",type:"button",value:"Excluir",onClick:function(){return a(t.id)}}),r.a.createElement("input",{"data-testid":"edit-btn",className:"btn btn-warning",type:"button",value:"Editar",onClick:function(){return n(t)}})))}}]),a}(r.a.Component),N=Object(s.b)(null,(function(e){return{rmv:function(t){return e(function(e){return{type:"RMV_EXPENSE",id:e}}(t))},edt:function(t){return e(function(e){return{type:"EDT_EXPENSE",expense:e}}(t))}}}))(w),D=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.expenses;return r.a.createElement("table",{className:"table table-striped table-bordered table-hover align-middle text-center"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Descri\xe7\xe3o"),r.a.createElement("th",{scope:"col"},"Tag"),r.a.createElement("th",{scope:"col"},"M\xe9todo de pagamento"),r.a.createElement("th",{scope:"col"},"Valor"),r.a.createElement("th",{scope:"col"},"Moeda"),r.a.createElement("th",{scope:"col"},"C\xe2mbio utilizado"),r.a.createElement("th",{scope:"col"},"Valor convertido"),r.a.createElement("th",{scope:"col"},"Moeda de convers\xe3o"),r.a.createElement("th",{scope:"col"},"Editar/Excluir")),e?e.map((function(e){return r.a.createElement(N,{key:e.id,expense:e})})):null))}}]),a}(r.a.Component),S=Object(s.b)((function(e){return{expenses:e.wallet.expenses}}))(D),R=(a(46),function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement(k,null),r.a.createElement(S,null))}}]),a}(r.a.Component));a(47);var F=function(){return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/carteira",component:R}),r.a.createElement(o.b,{exact:!0,path:"/",component:y}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(14),P=a(31),_=a(32),T={email:void 0},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return{email:t.email};default:return e}},M=a(18),V={currencies:[],currenciesResp:{},expenses:[],editing:{edit:!1,expense:{}}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CURRENCIES":return Object(O.a)(Object(O.a)({},e),{},{currencies:Object(M.a)(Object.keys(t.currencies)),currenciesResp:t.currencies});case"ADD_EXPENSE":return Object(O.a)(Object(O.a)({},e),{},{expenses:[].concat(Object(M.a)(e.expenses),[t.expense])});case"RMV_EXPENSE":return Object(O.a)(Object(O.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.id}))});case"EDT_EXPENSE":return Object(O.a)(Object(O.a)({},e),{},{editing:{edit:!0,expense:t.expense}});case"REPLACE_EXPENSE":return Object(O.a)(Object(O.a)({},e),{},{expenses:[].concat(Object(M.a)(e.expenses.slice(0,e.expenses.findIndex((function(e){return e.id===t.expense.id})))),[t.expense],Object(M.a)(e.expenses.slice(e.expenses.findIndex((function(e){return e.id===t.expense.id}))+1))),editing:{edit:!1,expense:{}}});default:return e}},I=Object(A.combineReducers)({user:U,wallet:X}),z=Object(A.createStore)(I,Object(P.composeWithDevTools)(Object(A.applyMiddleware)(_.a)));l.a.render(r.a.createElement(s.a,{store:z},r.a.createElement(i.a,null,r.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.7834eac4.chunk.js.map